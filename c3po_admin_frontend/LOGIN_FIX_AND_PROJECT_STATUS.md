# ç™»å½•è·³è½¬ä¿®å¤ä¸é¡¹ç›®çŠ¶æ€æ€»ç»“

## âœ… å·²ä¿®å¤ï¼šç™»å½•æˆåŠŸåæ— è½¬è·³é—®é¢˜

### é—®é¢˜åˆ†æ
ç™»å½•é¡µé¢åŸæœ¬ä½¿ç”¨ `router.push()` è¿›è¡Œè·³è½¬ï¼Œä½†ç”±äºçŠ¶æ€æ›´æ–°çš„å¼‚æ­¥æ€§ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨äº† Zustand persist ä¸­é—´ä»¶ï¼‰ï¼Œå¯¼è‡´è·³è½¬æ—¶çŠ¶æ€å¯èƒ½è¿˜æœªå®Œå…¨æ›´æ–°ã€‚

### ä¿®å¤æ–¹æ¡ˆ
1. **ä½¿ç”¨ `window.location.href` æ›¿ä»£ `router.push()`**
   - ç¡®ä¿å®Œå…¨è·³è½¬å¹¶é‡æ–°åŠ è½½é¡µé¢
   - é¿å…çŠ¶æ€åŒæ­¥é—®é¢˜

2. **æ·»åŠ çŠ¶æ€æ›´æ–°ç­‰å¾…**
   - åœ¨ç™»å½•æˆåŠŸåç­‰å¾… 100ms ç¡®ä¿çŠ¶æ€æ›´æ–°å®Œæˆ
   - ç§»é™¤å¯¹ router çš„ä¾èµ–

### ä¿®æ”¹æ–‡ä»¶
- `app/(auth)/login/page.tsx`
  - `onSubmit` å‡½æ•°ï¼šä½¿ç”¨ `window.location.href` å¹¶æ·»åŠ ç­‰å¾…
  - `useEffect` é’©å­ï¼šä½¿ç”¨ `window.location.href` å¹¶æ£€æŸ¥ `isLoading` çŠ¶æ€

## ğŸ“Š é¡¹ç›®å·²å®Œæˆæ¨¡å—æ€»ç»“

æ ¹æ®é¡¹ç›®ç›®å½•ç»“æ„ï¼Œä»¥ä¸‹æ¨¡å—å·²ç»ç”±å…¶ä»– agent å®Œæˆï¼š

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒæ¨¡å—

1. **è®¤è¯ä¸å¸ƒå±€** âœ…
   - ç™»å½•é¡µé¢ (`app/(auth)/login/page.tsx`)
   - ä¸»å¸ƒå±€ç»„ä»¶ (`components/layout/`)
     - Sidebarï¼ˆä¾§è¾¹æ ï¼‰
     - TopBarï¼ˆé¡¶æ ï¼‰
     - Breadcrumbï¼ˆé¢åŒ…å±‘ï¼‰
   - è®¤è¯å®ˆå« (`components/auth/AuthGuard.tsx`)

2. **ä»ªè¡¨æ¿** âœ…
   - ä»ªè¡¨æ¿é¡µé¢ (`app/(dashboard)/dashboard/page.tsx`)
   - API è°ƒç”¨ (`lib/api/dashboard.ts`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

3. **ç”¨æˆ·ç®¡ç†** âœ…
   - ç”¨æˆ·åˆ—è¡¨é¡µé¢ (`app/(dashboard)/users/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

4. **è¯¾ç¨‹ç®¡ç†** âœ…
   - è¯¾ç¨‹åˆ—è¡¨é¡µé¢ (`app/(dashboard)/courses/page.tsx`)
   - è¯¾ç¨‹è¯¦æƒ…é¡µé¢ (`app/(dashboard)/courses/[id]/page.tsx`)
   - è¯¾ç¨‹ç¼–è¾‘é¡µé¢ (`app/(dashboard)/courses/[id]/edit/page.tsx`)
   - åˆ›å»ºè¯¾ç¨‹é¡µé¢ (`app/(dashboard)/courses/new/page.tsx`)

5. **ä½œä¸šç®¡ç†** âœ…
   - ä½œä¸šåˆ—è¡¨é¡µé¢ (`app/(dashboard)/assignments/page.tsx`)
   - ä½œä¸šè¯¦æƒ…é¡µé¢ (`app/(dashboard)/assignments/[assignmentId]/page.tsx`)
   - æäº¤è¯¦æƒ…é¡µé¢ (`app/(dashboard)/assignments/[assignmentId]/submissions/[submissionId]/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

6. **æˆç»©ç®¡ç†** âœ…
   - å­¦ç”Ÿæˆç»©é¡µé¢ (`app/(dashboard)/scores/students/[studentId]/page.tsx`)
   - è¯¾ç¨‹æˆç»©é¡µé¢ (`app/(dashboard)/scores/courses/[courseId]/page.tsx`)
   - è¯¾ç¨‹åˆ†æé¡µé¢ (`app/(dashboard)/scores/courses/[courseId]/analytics/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

7. **å®¡æ‰¹ç®¡ç†** âœ…
   - å®¡æ‰¹åˆ—è¡¨é¡µé¢ (`app/(dashboard)/approvals/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

8. **é€šçŸ¥ç®¡ç†** âœ…
   - é€šçŸ¥åˆ—è¡¨é¡µé¢ (`app/(dashboard)/notifications/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

9. **ç³»ç»Ÿè®¾ç½®** âœ…
   - ç³»ç»Ÿè®¾ç½®é¡µé¢ (`app/(dashboard)/settings/page.tsx`)
   - æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º

### âœ… å·²åˆ›å»ºçš„é€šç”¨ç»„ä»¶

1. **UI ç»„ä»¶** (`components/ui/`)
   - StatCardï¼ˆç»Ÿè®¡å¡ç‰‡ï¼‰
   - DataTableï¼ˆæ•°æ®è¡¨æ ¼ï¼‰
   - ConfirmDialogï¼ˆç¡®è®¤å¯¹è¯æ¡†ï¼‰
   - FormModalï¼ˆè¡¨å•æ¨¡æ€æ¡†ï¼‰
   - Toastï¼ˆé€šçŸ¥ç»„ä»¶ï¼‰

2. **è¡¨å•ç»„ä»¶** (`components/forms/`)
   - FormFieldï¼ˆè¡¨å•å­—æ®µï¼‰

3. **å›¾è¡¨ç»„ä»¶** (`components/charts/`)
   - LineChartï¼ˆæŠ˜çº¿å›¾ï¼‰
   - BarChartï¼ˆæŸ±çŠ¶å›¾ï¼‰

### âœ… å·²å®ç°çš„ API å®¢æˆ·ç«¯

1. **è®¤è¯ API** (`lib/api/auth.ts`)
   - login, logout, refreshToken, getCurrentUser

2. **ä»ªè¡¨æ¿ API** (`lib/api/dashboard.ts`)
   - getDashboardOverview, getDashboardUsageTrend, getDashboardPendingTasks

3. **API å®¢æˆ·ç«¯åŸºç¡€** (`lib/api/client.ts`)
   - Axios å®ä¾‹é…ç½®
   - è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
   - é”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘

### âœ… å·²åˆ›å»ºçš„ç±»å‹å®šä¹‰

ç±»å‹å®šä¹‰æ–‡ä»¶ (`types/api.ts`) åŒ…å«ï¼š
- ç”¨æˆ·ç›¸å…³ç±»å‹
- è®¤è¯ç›¸å…³ç±»å‹
- ä»ªè¡¨æ¿ç›¸å…³ç±»å‹
- è¯¾ç¨‹ç›¸å…³ç±»å‹
- ä½œä¸šç›¸å…³ç±»å‹
- æäº¤ç›¸å…³ç±»å‹
- æˆç»©ç›¸å…³ç±»å‹
- ç­‰ç­‰...

### âœ… åŸºç¡€è®¾æ–½

1. **çŠ¶æ€ç®¡ç†**
   - Zustand store (`lib/auth/store.ts`)
   - Toast store (`lib/hooks/useToast.ts`)

2. **å·¥å…·å‡½æ•°**
   - Token å­˜å‚¨ (`lib/utils/storage.ts`)
   - é”™è¯¯å¤„ç† (`lib/utils/api-error.ts`)

3. **æµ‹è¯•æ¡†æ¶**
   - Jest é…ç½®
   - React Testing Library
   - æµ‹è¯•æ–‡ä»¶å·²ä¸ºå¤šä¸ªæ¨¡å—åˆ›å»º

4. **ä»£ç è§„èŒƒ**
   - ESLint é…ç½®
   - Prettier é…ç½®
   - TypeScript ä¸¥æ ¼æ¨¡å¼

## ğŸ¯ é¡¹ç›®çŠ¶æ€

### åŠŸèƒ½å®Œæˆåº¦
æ ¹æ®ç›®å½•ç»“æ„åˆ†æï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½æ¨¡å—å·²ç»å®ç°ï¼š
- âœ… è®¤è¯ç³»ç»Ÿ
- âœ… å¸ƒå±€ç»„ä»¶
- âœ… ä»ªè¡¨æ¿
- âœ… ç”¨æˆ·ç®¡ç†
- âœ… è¯¾ç¨‹ç®¡ç†
- âœ… ä½œä¸šç®¡ç†
- âœ… æˆç»©ç®¡ç†
- âœ… å®¡æ‰¹ç®¡ç†
- âœ… é€šçŸ¥ç®¡ç†
- âœ… ç³»ç»Ÿè®¾ç½®

### ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•å’Œè°ƒè¯•**
   - è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿é€šè¿‡
   - ä¿®å¤æ„å»ºé”™è¯¯
   - ç«¯åˆ°ç«¯æµ‹è¯•

2. **ä¼˜åŒ–å’Œå®Œå–„**
   - æ€§èƒ½ä¼˜åŒ–
   - é”™è¯¯å¤„ç†å®Œå–„
   - ç”¨æˆ·ä½“éªŒä¼˜åŒ–

3. **æ–‡æ¡£**
   - API æ–‡æ¡£
   - ç»„ä»¶æ–‡æ¡£
   - ä½¿ç”¨æŒ‡å—

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç™»å½•è·³è½¬ä¿®å¤**ï¼šç°åœ¨ä½¿ç”¨ `window.location.href` ç¡®ä¿è·³è½¬ï¼Œå¯èƒ½ä¼šé‡æ–°åŠ è½½é¡µé¢
2. **æ„å»ºé”™è¯¯**ï¼šå½“å‰é¡¹ç›®å­˜åœ¨ä¸€äº›æ„å»ºé”™è¯¯ï¼Œéœ€è¦ä¿®å¤ï¼ˆä¸»è¦æ˜¯å…¶ä»–æ¨¡å—çš„å¯¼å…¥é—®é¢˜ï¼‰
3. **çŠ¶æ€ç®¡ç†**ï¼šZustand persist ä¸­é—´ä»¶å¯èƒ½å¯¼è‡´çŠ¶æ€æ›´æ–°å»¶è¿Ÿï¼Œéœ€è¦æ³¨æ„

## ğŸ”§ ä¿®å¤è¯´æ˜

ç™»å½•è·³è½¬é—®é¢˜å·²é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿®å¤ï¼š
- ä½¿ç”¨ `window.location.href` æ›¿ä»£ `router.push()`
- æ·»åŠ çŠ¶æ€æ›´æ–°ç­‰å¾…æ—¶é—´
- åœ¨ useEffect ä¸­æ£€æŸ¥ `isLoading` çŠ¶æ€

è¿™æ ·ç¡®ä¿äº†ç™»å½•æˆåŠŸåèƒ½å¤Ÿå¯é åœ°è·³è½¬åˆ°ç›®æ ‡é¡µé¢ã€‚

